---
title: My Awesome Catchy Title! # Geef je paper een naam die prikkelt, informatief is, en zo kort mogelijk

author: |
  | Michiel Noback $^1$, Fenna Feenstra $^1$, John Doe $^2$
  | $^1$Hanzehogeschool,  $^2$Een ander instituut

lang: nl # dit zorgt er voor dat "abstract" "samenvatting" gaat heten

abstract: |
  Geef hier je samenvatting in maximaal 150 woorden. Het is een samenvatting van het hele artikel; niet alleen de resultaten! Begin met het belang van dit onderzoek, dan hoe het onderzoek is aangepakt en de belangrijkste resultaten en eindig met de implicaties ervan voor de wetenschap/de maatschappij. Neem nooit figuren of tabellen op in de samenvatting.

bibliography: simple_template.bib # naam van je .bib file. Deze moet hetzelfde zijn als je Rmd bestandsnaam

output:
  bookdown::pdf_document2:
    keep_tex: false    # set this to true if you want to investigate the generated tex
    toc: false         # table of contents
    fig_caption: true  # includes figure captions with numbering in output
    includes:  
        in_header: include_tex_header.tex #will include rules for linespacing and figure floating

---

# Introductie op deze template

**Dit hoofdstuk niet in je eigen paper toevoegen!**

Dit template bevat alle verplichte onderdelen van de paper die je moet schrijven. De titels van de secties mag je NIET wijzigen. Voor elk onderdeel is gegeven wat erin thuis hoort en hoe je dat kan aanpakken. Ook is er aangegeven hoeveel woorden er minimaal en maximaal in de sectie gebruikt mogen worden. In totaal mag je artikel niet minder dan 1000 en niet meer dan 2000 woorden bevatten.

Gebruik de [wordcount plugin](https://github.com/benmarwick/wordcountaddin) om het aantal woorden te tellen van een sectie, en voeg aan het einde een totaal in (zoals al aanwezig in deze template).


## Setup *Chunk* {#setup-chunk}

Aan het begin van je paper kan je een zogenaamde *setup chunk* toevoegen. Hierin kan je het gedrag van `knitr` configureren en de bibliotheken laden die je in je code gebruikt. Hieronder is een voorbeeld van zo'n *setup chunk*.

```{r setup, message=FALSE, warning=FALSE, include=FALSE}
knitr::opts_chunk$set(out.width = '100%', dpi=300) # configuratie voor figuur grootte en resolutie
knitr::opts_chunk$set(echo = FALSE) # Deze regel zorgt ervoor GEEN ENKELE chunk getoond wordt! 
# Laad alle gebruikte bibliotheken hier
library(ggplot2)
library(dplyr)
library(pwr)
library(forcats)
data_set_plants <- read.csv("../raw_data/raw_data_planten.csv")
```

**NB** Gebruik altijd een naam voor iedere chunk. Dat maakt het *debuggen* van problemen bij het *knitten* van je RMarkdown document veel gemakkelijker.

## Code "*Chunks*" wel of niet tonen

In principe laat je code nooit zien in een publicatie, behalve als de code expliciet besproken wordt en een essentieel onderdeel vormt van je werk. Je kan code gemakkelijk verbergen door gebruik te maken van de optie `echo=FALSE` in de chunk header. Ook storende output kan je eventueel verbergen door gebruik te maken van `message=FALSE` of `warning=FALSE`. Eventueel kan je all chunks in een keer verbergen door dit in je *setup chunk* te plaatsen: `knitr::opts_chunk$set(echo = FALSE)`.

## Referenties / citeren {#refs}

Voor alle secties geldt dat je referenties kan gebruiken naar andere publicaties (externe referenties ofwel citatie) of naar secties, tabellen of figuren in je eigen publicatie (interne referenties). Voor externe referenties gebruik je deze notatie: `[@<ref_key]`, bijvoorbeeld `[@xie2013ddrk]`. Hier gebruik ik hem echt: [@xie2013ddrk]. De *processing engine* zal in het bibliografie bestand zoals opgegeven in de ***yaml header*** van dit bestand (`simple_template.bib`) zoeken naar de referentie met deze naam en vervolgens de hele referentie onderaan in het document opnemen. Kijk vooral in het `.bin` document hoe je deze kan gebruiken. Er zijn voor verschillende soorten bronnen verschillende @annotaties; zie in de `.bib` voor enkele voorbeelden.

Interne referenties naar tabellen, figuren, equations en secties kan je maken door deze syntax te gebruiken: `\@ref(fig:<figuur-naam>)` waarbij `<figuur-naam>` de naam is van het chunk waarin de figuur gemaakt wordt. Hetzelfde werkt voor tabellen: `\@ref(tab:<tabel-naam>)`. Een sectie kan je labelen door er `{#label-naam}` achter te zetten. Bijvoorbeeld, dit `\@ref(setup-chunk)` linkt terug naar de sectie over de setup chunk in sectie [\@ref(setup-chunk)].

Zie ook de hoofdstukken in het geweldige book over [bookdown](https://bookdown.org/yihui/bookdown/) [hier](https://bookdown.org/yihui/bookdown/cross-references.html) en [hier](https://bookdown.org/yihui/rmarkdown-cookbook/cross-ref.html)

Voor de rest: GIYF!

## Taalgebruik

Wetenschappelijk taalgebruik is heel anders dan dagelijks communiceren - laat staan de taal die in online wordt gebruikt in bv Whatsapp of Instagram! Wetenschappelijk taalgebruik is formeel, onpersoonlijk en  ondubbelzinnig.
Een klein voorbeeld: Je schrijft nooit "ik heb de verandering van zoutconcentratie bij langduring huilen onderzocht" maar "de verandering van zoutconcentratie in de tijd bij aanhoudend huilen is onderzocht" 

Natuurlijk moeten spelling en grammatica (zo goed als) foutloos zijn! RStudio heeft redelijk goede spellingscontrole, ook voor Nederlands (alhoewel je deze misschien wel apart moet installeren). Gebruik deze!


Alle volgende onderdelen moet je opnemen in je eigen artikel. Let vooral ook op het minimu

# Introductie

Je start altijd met de maatschappelijke drijfveer voor je onderzoek; waarom is het van belang dat dit onderzoek is uitgevoerd?
Vervolgens bespreek je de achtergronden van je onderzoek. Wat is er al eerder onderzocht op dit vlak en wat mist er juist nog; welke speciale technieken heb je gebruikt? Refereer zorgvuldig naar bronnen die je hebt gebruikt - zie ook paragraaf \@ref(refs).

Je eindigt de introductie met de doelstelling(en) van jouw onderzoek, en hoe je deze doelstellingen denkt te gaan verwezenlijken; de aanpak. Geef hier ook eventuele hypothesen. 

De introductie bevat tussen de 400-800 woorden.


# Materialen en Methoden
Github repo: https://github.com/RamonReilman/blog_ish
Materialen en Methoden beschrijft verhalend wat je hebt gebruikt (data, tools) en wat je hebt gedaan (ontwikkelde methodes). **_Het is essentieel dat dit hoofdstuk je onderzoek reproduceerbaar en valideerbaar maakt_**. Verwijs bij de start van dit hoofdstuk naar je code repository (meestal je github link).

Neem referenties op!

De materialen zijn de meetinstrumenten die je hebt gebruikt, maar ook bijvoorbeeld datasets die je hebt gedownload.

Beschrijf de gebruikte software tools, alsmede de bibliotheken/plugins, met naam, versie, referentie en gebruiksdoel (in dit project). Dit kan eventueel in een tabel an als die lang is mag het een online bijlage zijn.

Beschrijf bestaande methodologieën met hun relevantie voor je project. Geef het doel, de toepassing en welke software en parameters er zijn gebruik. Voeg eventueel een flowchart toe.
Beschrijf de gebruikte statistische methoden.

Beschrijf wat je zelf in het kader van dit onderzoek hebt ontwikkeld aan methodologieën. Geef de naam van scripts/programma’s en waar deze (in je repo) te vinden zijn.

Deze sectie bevat tussen de 400-800 woorden.

# Resultaten

### Ontkieming
Om te kijken naar hoeveel impact de zoutoplossingen hebben op de groei van de plant wordt gekeken naar de ontkieming van de zaadjes. <br>

```{r, fig.cap= "Ontkieming per soort voor elke oplossing. Deze grafiek geeft het aantal ontkiemde zaadjes weer. Op de x-as staan de oplossingen, op de y-as staat het aantal ontkiemde zaadjes"}
nw_oplossing <- data_set_plants %>%
    filter(oplossing == rep(c(0, 0.03, 0.06, 0.09), each=50)) 

nw_oplossing %>%
    ggplot(aes(x = factor(oplossing), fill = factor(ontkiemt))) +
    geom_bar(position = "dodge") + 
    facet_wrap(~ species) + 
    labs(title = "Ontkiemde zaadjes",
         subtitle = "In zoutoplossing 0% - 0.09%",
         x = "Oplossing", 
         y = "Aantal ontkiemt") +
    scale_fill_brewer(palette = "YlGn") +
    theme_minimal()
```
In de barplot is te zien dat bijna alles ontkiemd is, om te kijken of hier nog significant verschil in zit worden er een aantal statistische testen uitgevoerd.

Om te kijken of de zoutoplossingen impact hebben op de ontkieming van de plantjes kunnen een aantal statistische testen worden uitgevoerd. Eerst wordt er een nieuwe dataset gemaak van de ontkieming per species per oplossing. <br> 
```{r, echo=FALSE}
data_set_ontkieming <- data_set_plants %>%
    # Selecteer de juiste kolommen
    select(ontkiemt, species, oplossing) %>%
    # Paste wordt gebruikt om species en oplossing samen te voegen
    # Factor zet een vector om naar een categorie
    mutate(species_oplossing = factor(paste(as.character(species), as.character(oplossing), sep = "-")))
```

Vervolgens wordt daarvan een tabel gemaakt waarin het aantal ontkiemde zaadjes per soort en per zoutoplossing uitgezet wordt.<br>
```{r, echo=FALSE}
ontkieming_table <- table(data_set_ontkieming$species,data_set_ontkieming$oplossing + data_set_ontkieming$ontkiemt)
```

Vervolgens wordt gecontroleerd of alle waarden zijn meegenomen doormiddel van de sum functie.<br>
```{r, echo=FALSE}
addmargins(ontkieming_table)
```

Om het verschil te kunnen zien tussen de 2 soorten en n ontkiemingen wordt een 2-way chi-square test uitgevoerd. <br>
```{r, echo=FALSE}
# 2-way chisq uitvoeren om verschil te kunnen testen
res <- chisq.test(x = ontkieming_table)
```
Omdat de p-waarde groter is dan 0.05 is er geen significant verschil van ontkieming tussen de twee plantensoorten op basis van alle zoutoplossingen. <br>

Om te weten of het een relevant verschil is, moet de effectsterkte berekend worden.
Voor proportie wordt Cohen's M gebruikt.<br>
```{r, echo=FALSE}
chi2 <- res$statistic
N <- sum(ontkieming_table)
W <- sqrt(chi2 / N)
df <- res$parameter
```
Met een effectgrootte van 0.075 is er nagenoeg geen verband tussen de invloed op ontkiemde zaadjes tussen plant, en zoutoplossingen. <br>

Om te controleren of deze conclusie, gebaseerd op statistiek, correct is wordt de power berekend.<br>
```{r, echo=FALSE}
alpha <- 0.05
pwr.chisq.test(w=W, N=N, df=df, sig.level = alpha)
```
De power is 0.29. Daarmee kunnen we zeggen dat onze conclusie, er is geen sigfnicant verschil gevonden van het aantal ontkiemde zaadjes tussen de 2 planten over de verschillende oplossingen, een 29% kans heeft om correct te zijn.<br>

Hoeveel metingen hebben we nodig om 0.8 power te krijgen, met een W van 0.1?<br>
```{r, echo=FALSE}
pwr.chisq.test(w = 0.1, df = df, sig.level = 0.05, power = 0.80)
```
Om een correcte statistische uitkomst te krijgen zouden er dus 1194 planten geplant moeten worden, zo'n 600 per planten soort. <br>

### Aantal blaadjes

Om te kijken hoe de zoutoplossingen impact hebben op de groei van het aantal blaadjes is dit uitgezet in onderstaande barplot. <br>
```{r, fig.cap="Aantal blaadjes per batch per zoutoplossing. Deze barplot geeft het aantal blaadjes per plant per zoutoplossing weer. Op de x-as de zoutoplossingen, op de y-as het aantal blaadjes"}
data_set_plants %>%
    aggregate(blaadjes ~ species + batch + oplossing, FUN = sum) %>%
    #fct_cross maakt nieuwe kolom en combineert hetgene wat erin staat
    mutate(species_batch = fct_cross(species, as.character(batch), sep = "_")) %>%
    #Fill werkt hier als een split functie voor de batches
    ggplot(aes(x=as.character(oplossing),y=blaadjes, fill=species_batch)) +
    
    labs(title="Barplot sum van blaadjes", 
         subtitle = "Voor 0%-0.09% zout", 
         y="Aantal blaadjes", 
         x="Oplossing zout") +
    
    geom_bar(position = "dodge", stat = "sum",
             color="black", size=0.5) +
    
    scale_fill_brewer(palette = "Dark2") +
    facet_wrap(species~batch) +
    theme_minimal() 
```
De alfalfa heeft minder blaadjes dan de tuinkers, verder is te zien dat alleen alfalfa in oplossing 0.03% afwijkt qua bladgroei.

### Kleur van blaadjes

```{r}
# Voorbereiden data
combined_df <- data_set_plants %>%
    filter(oplossing %in% c(0, 0.03, 0.06, 0.09)) %>%
    mutate(oplossing = factor(oplossing)) # oplossingen omzetten naar factor


# Goede kleuren toevoegen
kleuren <- c("licht_groen" = "lightgreen", 
             "donker_groen" = "darkgreen", 
             "groen" = "forestgreen", 
             "geel_groen" = "yellowgreen", 
             "bruin" = "brown", 
             "geen" = "gray", 
             "wit" = "white", 
             "wit_groen" = "palegreen" ,
             "geel" = "yellow")

# Barcharts plotten
ggplot(combined_df, aes(x=oplossing, fill=bladkleur)) +
    geom_bar(position = "stack") +
    scale_fill_manual(values = kleuren) +
    labs(title="Bladkleur",
         x="Oplossing",
         y="Aantal plantjes") +
    theme_minimal() + 
    facet_wrap(species~batch)
```
In deze stacked barchart is te zien welke bladkleur er gemeten is per plant, per batch, per zoutoplossing. Wat opvalt is dat alfalfa batch 1 en alfalaf batch 2 nagenoeg geen bladkleur hebben. 


Geef tabellen bovenaan een titel en bijschrift die de inhoud beschrijft en onderaan voetnoten die kolomnamen of specifieke waardes verklaren.

Deze sectie bevat tussen de 600-1200 woorden.


# Discussie en Conclusies

Formuleer je conclusie door eerst in te zoomen op je eigen data en daarna uit te zoomen. Zoom in door je resultaten samen te vatten. Zoom uit om de waarde van je werk te beoordelen, door je bijvoorbeeld de volgende vragen te stellen: 

- Kunnen mijn resultaten gebruikt worden in het werkveld? 
- Wat betekenen ze voor het werkveld? 
- Zijn mijn data betrouwbaar? 

Bespreek de resultaten zodanig dat je ze ter discussie stelt, wees kritisch. Vergelijk je resultaten met de literatuur of eerder ontwikkelde data. Geef aanbevelingen voor een vervolg en staaf je aanbevelingen door de impact op wetenschappelijk of maatschappelijk vlak te beschrijven. 

Kom ten slotte altijd terug op de doelstelling (en hypothesen).

Deze sectie bevat tussen de 400-800 woorden.


# Online bijlagen

Vaak zijn online bijlagen vele malen groter dan het eigenlijke artikel. Wees nooit bang om te veel aan bijlagen aan te bieden. Je kan hierbij denken aan

- de ruwe data
- de code voor dataverwerking 
- de code voor analyse
- aanvullende figuren en tabellen

Natuurlijk is een git(hub) repo daar de beste plek voor!
Zorg ervoor de je repo logisch is ingericht met goede Readme document(en). 
Ook de code zelf is waar nodig natuurlijk goed gedocumenteerd.



## Wordcount

Voeg aan het eind een woord-telling in:

```{r wordcount, message=FALSE}
#install.packages("devtools")
#devtools::install_github("benmarwick/wordcountaddin", type = "source", dependencies = TRUE, force = TRUE)
wordcountaddin:::text_stats()
```


# Referenties

Een lijst van referenties wordt hier automagisch toegevoegd.
